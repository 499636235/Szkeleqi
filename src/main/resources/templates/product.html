<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!--<head th:replace="/fragments5/base :: common_header(~{::title},~{::link})">-->
<head>
    <meta charset="UTF-8">

    <!--thymeleaf代码块功能 导入共用link-->
    <th:block th:replace="common :: common_link"></th:block>
    <!--导入样式表-->
    <link href="/css/index.css" rel="stylesheet" type="text/css"/>
    <!--JavaScript-->


    <script th:src="@{/js/common.js}" type="text/javascript"></script>


    <script type="text/javascript">
        $(document).ready(function () {

            var jsonStr = "[[${indexProductList}]]".replace(new RegExp('&quot;', "gm"), '"');
            // console.log(jsonStr);
            var jsonObject = JSON.parse(jsonStr);
            // console.log(jsonObject);
            for (var k in jsonObject) {  //遍历jsonObject 对象的每个key/value对,k为key
                // console.log(k + " " + jsonObject[k].name);
                $("#product_ul").append(
                    "<li data-plugin=\"appear\" data-animate=\"slide-bottom\" class=\"animation-slide-bottom\">\n" +
                    "   <a href=\"/product/" + jsonObject[k].product_id + "\">\n" +
                    "       <p>\n" +
                    "           <img src=\"" + jsonObject[k].picture + "\" alt=\"" + jsonObject[k].name + "\" style=\"display: inline;\">\n" +
                    "       </p>\n" +
                    "       <span>" + jsonObject[k].name + "</span>\n" +
                    "   </a>\n" +
                    "</li>"
                );
            }
            /*

                        // 分页相关的参数
                        var pageNum = parseInt("[[${pageNum}]]");
                        var pageSize = parseInt("[[${pageSize}]]");
                        var totalPages = parseInt("[[${totalPages}]]");
                        var totalSize = parseInt("[[${totalSize}]]");

                        // 如果没有分页则不添加页码
                        if (isNaN(pageNum)) {
                            return;
                        }

                        // 判断是否第一页
                        if (pageNum > 1) {
                            // 添加页码中的 "上一页"
                            // $("<li/>").append($("<a/>").html("上一页")).appendTo($(".pagination"));
                            var a_prev = "<a href=\"/product/all/" + (pageNum - 1) + "/8\">上一页</a>";
                            $("<li/>").append(a_prev).appendTo($(".pagination"));
                        } else {
                            var a_prev = "<span>上一页</span>";
                            $("<li/>").append(a_prev).appendTo($(".pagination"));
                        }

                        // 添加分页中的 页号
                        for (var i = 1; i <= totalPages; i++) {
                            // $("<li/>").append($("<a/>").html(i)).appendTo($(".pagination"));
                            var a_i = "<a href=\"/product/all/" + i + "/8\">" + i + "</a>";
                            $("<li/>").append(a_i).appendTo($(".pagination"));

                        }

                        // 判断是否最后一页
                        if (pageNum < totalPages) {
                            // 添加页码中的 "下一页"
                            // $("<li/>").append($("<a/>").html("下一页")).appendTo($(".pagination"));
                            var a_next = "<a href=\"/product/all/" + (pageNum + 1) + "/8\">下一页</a>";
                            $("<li/>").append(a_next).appendTo($(".pagination"));
                        } else {
                            var a_next = "<span>下一页</span>";
                            $("<li/>").append(a_next).appendTo($(".pagination"));
                        }
            */

        });
    </script>
</head>
<body>
<!--导航栏-->
<th:block th:replace="common :: common_nav"></th:block>

<div class="picture-box">
    <div class="container-fluid">
        <div class="title-box animation-slide-bottom appear-no-repeat" data-plugin="appear" data-animate="slide-bottom"
             data-repeat="false">

            <h3>产品中心</h3>

            <p>梦的家园，爱的港湾，科乐奇为您打造温暖的世界！</p>

        </div>
        <div class="picture-list">
            <ul id="product_ul" class="blocks blocks-xs-2 blocks-md-4">


            </ul>
        </div>

    </div>
    <ul class="pagination" th:if="${pageNum!=null?true:false}">
        <li>
            <a th:if="${pageNum} gt 1" th:href="@{'/product/all/'+${pageNum - 1}+'/8'}">上一页</a>
            <span th:if="${pageNum} lt 2">上一页</span>
        </li>
        <li th:each="i:${#numbers.sequence(1,totalPages)}">
            <a th:href="@{'/product/all/'+${i}+'/8'}" th:text="${i}">xxx</a>
        </li>
        <li>
            <a th:if="${pageNum} lt ${totalPages}" th:href="@{'/product/all/'+${pageNum + 1}+'/8'}">下一页</a>
            <span th:if="${pageNum} gt ${totalPages - 1}">下一页</span>
        </li>
    </ul>
</div>


<div>

</div>
<!--页脚-->
<th:block th:replace="common :: common_footer"></th:block>
</body>
</html>